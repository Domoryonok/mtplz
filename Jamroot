path-constant TOP : . ;
include $(TOP)/jam-files/sanity.jam ;

boost 104200 ;

external-lib z ;

if ! [ option.get "without-tcmalloc" : : "yes" ] && [ test_library "tcmalloc_minimal" ] {
  external-lib tcmalloc_minimal ;
  requirements += <threading>multi:<library>tcmalloc_minimal ;
}

project : requirements $(requirements) <threading>multi:<define>WITH_THREADS <library>boost_system <define>HAVE_BOOST ;
project : default-build <threading>multi <warnings>on <variant>release ;

build-projects search lm util ;

install-bin-libs alone//decode lm//programs ;
install-headers headers : [ glob-tree *.hh : dist include ] : . ;
alias install : prefix-bin prefix-lib prefix-include ; 
explicit headers ;
explicit install ;
